
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>MOST ‚Äî Autism Support Prototype</title>
<style>
  :root { --bg:#f6f7fb; --card:#ffffff; --text:#111; --muted:#666; --accent:#4c7cf3; }
  * { box-sizing: border-box; }
  body { margin:0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background: var(--bg); color: var(--text); }
  header { position: sticky; top:0; background:var(--card); padding: 14px 16px; display:flex; align-items:center; gap:12px; border-bottom:1px solid #eee; z-index: 2; }
  header h1 { margin:0; font-size:18px; }
  header small { color:var(--muted); }
  .container { max-width: 980px; margin: 0 auto; padding: 16px; }
  .grid { display:grid; grid-template-columns: 1fr; gap: 16px; }
  @media (min-width: 900px){
    .grid { grid-template-columns: 1.2fr 1fr; }
  }
  .card { background: var(--card); border:1px solid #eee; border-radius: 14px; padding: 16px; box-shadow: 0 2px 6px rgba(0,0,0,0.03); }
  .card h2 { margin: 0 0 10px; font-size: 18px; }
  .pill { display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:20px; font-size:12px; border:1px solid #eee; background:#fafafa; color:#333; }
  .row { display:flex; align-items:center; gap:10px; flex-wrap:wrap; }
  label { display:block; margin: 6px 0; }
  input[type="number"], select, textarea { width: 100%; padding: 10px; border:1px solid #ddd; border-radius: 10px; }
  button { appearance: none; border: none; background: var(--accent); color: #fff; padding: 10px 14px; border-radius: 12px; cursor: pointer; font-weight: 600; }
  button.secondary { background: #eaeefe; color: #3154c4; }
  .result { border-radius: 12px; padding: 12px; margin-top: 10px; font-size: 14px; }
  .green { background:#ebfbf2; border:1px solid #b9efcf; }
  .yellow { background:#fff6e0; border:1px solid #f8df8b; }
  .red { background:#ffecec; border:1px solid #ffb4b4; }
  .muted { color: var(--muted); font-size: 13px; }
  .inline { display:inline-block; }
  /* Chat */
  .chat { display:flex; flex-direction: column; gap:10px; height: 360px; border:1px solid #eee; border-radius: 12px; padding: 12px; overflow: auto; background:#fafbff; }
  .msg { max-width: 80%; padding: 10px 12px; border-radius: 12px; }
  .me { background:#e8eeff; align-self:flex-end; }
  .bot { background:#fff; border:1px solid #eee; align-self:flex-start; }
  .chat-input { display:flex; gap:8px; margin-top:10px; }
  /* Tabs (Flo-like) */
  .tabs { display:flex; gap:10px; margin-bottom:10px; }
  .tab { flex:1; text-align:center; padding:10px; border-radius:10px; background:#f0f2fb; cursor:pointer; font-weight: 600; }
  .tab.active { background:#e2e7ff; color:#243aaf; }
  .hidden { display:none; }
  .list { display:flex; flex-direction:column; gap:10px; }
  .messageItem { display:flex; align-items:center; gap:12px; padding: 12px; border:1px solid #eee; background:#fff; border-radius: 12px; }
  .badge { width: 40px; height: 40px; border-radius: 12px; display:grid; place-items:center; font-size:22px; }
  .b1 { background:#f1f0ff; } .b2 { background:#e9f9f1; } .b3 { background:#fff3ea; }
  .right { margin-left:auto; color:#999; font-size:12px; }
  .kbd { font-family: ui-monospace, SFMono-Regular, Menlo, monospace; background:#f3f3f5; padding:2px 6px; border-radius: 6px; font-size:12px; }
  .footerNote { margin-top: 8px; font-size: 12px; color: #888; }
</style>
</head>
<body>
<header>
  <div class="pill">MOST ¬∑ Prototype</div>
  <h1>Autism Support Assistant</h1>
  <small class="muted">by your teen team</small>
</header>

<div class="container">
  <div class="tabs">
    <div class="tab active" data-tab="checker">Symptom Checker</div>
    <div class="tab" data-tab="chat">AI Assistant</div>
    <div class="tab" data-tab="log">Daily Log</div>
    <div class="tab" data-tab="messages">Messages</div>
  </div>

  <div id="checker" class="card">
    <h2>Quick Check-in</h2>
    <p class="muted">Select what applies right now. The assistant will estimate stress level and offer tips.</p>
    <div class="grid">
      <div class="card">
        <h3 class="muted">Inputs</h3>
        <label><input type="checkbox" class="sym" value="noise"> Too much noise around</label>
        <label><input type="checkbox" class="sym" value="light"> Bright/flashy lights</label>
        <label><input type="checkbox" class="sym" value="touch"> Uncomfortable touch / tight clothes</label>
        <label><input type="checkbox" class="sym" value="routine"> Routine change / transition</label>
        <label><input type="checkbox" class="sym" value="sleepLow"> Slept &lt; 7 hours</label>
        <label><input type="checkbox" class="sym" value="hungry"> Hungry / skipped meal</label>
        <label><input type="checkbox" class="sym" value="overwhelm"> Signs of overwhelm (covering ears, pacing, stimming ‚Üë)</label>
        <label><input type="checkbox" class="sym" value="pain"> Possible pain (headache, stomach)</label>
        <label>Minutes until next transition?
          <input type="number" id="minutes" min="0" placeholder="e.g. 15"/>
        </label>
        <div class="row">
          <button id="analyze">Analyze</button>
          <button class="secondary" id="reset">Reset</button>
        </div>
        <div id="res" class="result hidden"></div>
        <div class="footerNote">This is a prototype. It does not diagnose. For urgent issues call local emergency services.</div>
      </div>
      <div class="card">
        <h3 class="muted">What we look for</h3>
        <ul>
          <li>Environmental stressors (noise, light, touch)</li>
          <li>Physiological needs (sleep, hunger, pain)</li>
          <li>Transitions / routine changes</li>
          <li>Behavioral signals of overwhelm</li>
        </ul>
        <p class="muted">Output levels: <span class="kbd">Green</span> (ok), <span class="kbd">Yellow</span> (support), <span class="kbd">Red</span> (prevent meltdown).</p>
      </div>
    </div>
  </div>

  <div id="chat" class="card hidden">
    <h2>AI Assistant (rules-based demo)</h2>
    <div class="chat" id="chatBox">
      <div class="msg bot">Hi! I can help with routines, transitions, sensory tips, school, and calming ideas. Ask me anything.</div>
    </div>
    <div class="chat-input">
      <input id="chatInput" placeholder="Type your question..." style="flex:1; padding:10px; border:1px solid #ddd; border-radius: 12px;"/>
      <button id="sendBtn">Send</button>
    </div>
    <div class="footerNote">Prototype uses keyword intents locally (no internet). In real app, this would be a safer, supervised AI.</div>
  </div>

  <div id="log" class="card hidden">
    <h2>Daily Mood & Sensory Log</h2>
    <div class="row">
      <select id="moodSel">
        <option value="">Today's mood‚Ä¶</option>
        <option>üòÄ Happy</option>
        <option>üòê Neutral</option>
        <option>üòü Anxious</option>
        <option>üò≠ Sad</option>
        <option>üò° Angry</option>
      </select>
      <select id="sensSel">
        <option value="">Main sensory issue‚Ä¶</option>
        <option>Noise</option>
        <option>Light</option>
        <option>Touch</option>
        <option>Smell</option>
        <option>None</option>
      </select>
      <button id="saveLog">Save</button>
    </div>
    <div id="logList" class="list" style="margin-top:12px"></div>
    <div class="footerNote">Logs are stored only on your device (localStorage).</div>
  </div>

  <div id="messages" class="card hidden">
    <h2>Messages</h2>
    <div class="list" id="msgList">
      <!-- Filled by JS -->
    </div>
  </div>
</div>

<script>
// Tabs
document.querySelectorAll('.tab').forEach(t => {
  t.addEventListener('click', () => {
    document.querySelectorAll('.tab').forEach(x=>x.classList.remove('active'));
    t.classList.add('active');
    const tab = t.dataset.tab;
    ['checker','chat','log','messages'].forEach(id => {
      document.getElementById(id).classList.add('hidden');
    });
    document.getElementById(tab).classList.remove('hidden');
  });
});

// Symptom checker logic
const tips = {
  base: [
    "Offer a quiet corner or headphones to reduce sensory load.",
    "Use short, concrete language: what happens now and next.",
    "Validate feelings: ‚ÄúI see it‚Äôs loud. Let‚Äôs make it softer.‚Äù",
    "Offer choices of two: A or B. Reduce open questions.",
  ],
  noise: "Lower volume, move to quieter place, or use headphones/ear defenders.",
  light: "Dim lights, avoid flicker, offer cap/hood or sunglasses.",
  touch: "Change itchy clothing, avoid unexpected touch, offer deep-pressure hug if preferred.",
  routine: "Use a visual timer and a ‚Äònow/next‚Äô card for the upcoming transition.",
  sleepLow: "Lower demands, add mini-rest, use predictable routine today.",
  hungry: "Offer small snack + water; avoid new demands for 10‚Äì15 minutes.",
  overwhelm: "Go to safe space, reduce stimuli, slow breathing or 4‚Äì7‚Äì8 count.",
  pain: "Ask where it hurts, offer water/rest; consider medical check."
};

function analyze() {
  const selected = Array.from(document.querySelectorAll('.sym:checked')).map(i=>i.value);
  const minutes = parseInt(document.getElementById('minutes').value || '0', 10);
  let score = 0;
  const weights = { noise:1, light:1, touch:1, routine:2, sleepLow:2, hungry:1, overwhelm:3, pain:3 };
  selected.forEach(s => score += (weights[s]||1));
  if (minutes>0 && minutes <= 10) score += 2;
  if (minutes>10 && minutes <= 20) score += 1;

  let level = 'green';
  if (score >= 6 && score < 9) level = 'yellow';
  if (score >= 9) level = 'red';

  const box = document.getElementById('res');
  box.className = 'result ' + level;
  const title = level==='green' ? 'GREEN ¬∑ OK' : (level==='yellow' ? 'YELLOW ¬∑ Support now' : 'RED ¬∑ Prevent meltdown');
  let adv = [...tips.base];
  selected.forEach(s => adv.push(tips[s]));
  if (minutes>0) adv.push(`Set a visual timer for the next ${minutes} min.`);
  box.innerHTML = `<strong>${title}</strong><br>${adv.map(a=>`‚Ä¢ ${a}`).join('<br>')}`;
  box.classList.remove('hidden');
}
document.getElementById('analyze').addEventListener('click', analyze);
document.getElementById('reset').addEventListener('click', ()=>{
  document.querySelectorAll('.sym').forEach(i=>i.checked=false);
  document.getElementById('minutes').value='';
  const box = document.getElementById('res');
  box.className = 'result hidden';
  box.innerHTML='';
});

// Chat intents (simple keyword-based)
const intents = [
  {key:['transition','switch','–ø–µ—Ä–µ—Ö–æ','now next','–≤–∏–∑—É–∞–ª—å–Ω'], 
   answer:"Transitions tip: use a ‚ÄòNow ‚Üí Next‚Äô card, a 5‚Äëminute warning, and a visual timer. Offer a choice for the next step (A/B). Keep language short: ‚ÄúNow shoes. Next park.‚Äù"},
  {key:['meltdown','–∫—Ä–∏–∑–∏—Å','–∏—Å—Ç–µ—Ä–∏–∫'], 
   answer:"Meltdown support: reduce sensory input (noise/light), move to safe corner, validate feelings, offer deep pressure if preferred, and avoid new demands. After, debrief with simple visuals."},
  {key:['sleep','—Å–æ–Ω','–Ω–æ—á—å'], 
   answer:"Sleep hygiene: consistent bedtime routine, low light 1h before sleep, white noise, heavy blanket (if liked), no screens 30‚Äì60 min prior."},
  {key:['school','—à–∫–æ–ª','–∫–ª–∞—Å—Å','—É—á–∏—Ç–µ–ª—å'], 
   answer:"School plan: quiet pass for breaks, seating away from noise, visual schedule, clear rules for transitions, and a safe helper/peer buddy."},
  {key:['sensory','—Å–µ–Ω—Å–æ—Ä','—à—É–º','—Å–≤–µ—Ç','—Ç–∞–∫—Ç–∏–ª'], 
   answer:"Sensory toolkit: noise-cancelling headphones, cap/sunglasses, fidget, chewy, weighted item. Allow short sensory breaks every 30‚Äì45 min."},
  {key:['communicat','–æ–±—â–µ–Ω–∏','–≥–æ–≤–æ—Ä','speech','—Ä–∞–∑–≥–æ–≤'], 
   answer:"Communication support: use visuals, gestures, short phrases, and model choices. Respect nonverbal communication (pointing, cards, device)."},
  {key:['diet','–µ–¥–∞','–≥–æ–ª–æ–¥','–ø–∏—Ç–∞–Ω–∏'], 
   answer:"Feeding tip: keep preferred safe foods available; pair new foods with safe ones; avoid mealtime pressure during high-stress times."},
  {key:['pain','–±–æ–ª–∏—Ç','–≥–æ–ª–æ–≤–∞','–∂–∏–≤–æ—Ç'], 
   answer:"Pain check: ask with body map visuals; offer water/rest; if repeated or severe‚Äîconsult a clinician."},
  {key:['anxiety','—Ç—Ä–µ–≤–æ–≥','stress','—Å—Ç—Ä–µ—Å—Å'], 
   answer:"Anxiety steps: identify trigger, reduce stimuli, breathing 4‚Äì7‚Äì8, grounding (5 things you see, 4 touch...), and predictable next step."},
];

function botSay(text){
  const node = document.createElement('div');
  node.className='msg bot';
  node.textContent = text;
  document.getElementById('chatBox').appendChild(node);
  document.getElementById('chatBox').scrollTop = 1e9;
}
function meSay(text){
  const node = document.createElement('div');
  node.className='msg me';
  node.textContent = text;
  document.getElementById('chatBox').appendChild(node);
  document.getElementById('chatBox').scrollTop = 1e9;
}

document.getElementById('sendBtn').addEventListener('click', ()=>{
  const val = document.getElementById('chatInput').value.trim();
  if(!val) return;
  meSay(val);
  document.getElementById('chatInput').value='';
  const q = val.toLowerCase();
  let reply = "I‚Äôm not sure yet. You can ask about transitions, meltdown, sensory, school, sleep, anxiety, pain, diet, or communication.";
  for (const intent of intents){
    if (intent.key.some(k => q.includes(k))) { reply = intent.answer; break; }
  }
  botSay(reply);
});

// Log
function renderLog(){
  const el = document.getElementById('logList');
  el.innerHTML = '';
  const logs = JSON.parse(localStorage.getItem('mostLogs') || '[]');
  logs.forEach(item => {
    const row = document.createElement('div');
    row.className='messageItem';
    row.innerHTML = `<div class="badge b2">${item.mood.split(' ')[0]||'üìù'}</div>
    <div>
      <div><strong>${item.mood||'‚Äî'}</strong></div>
      <div class="muted">Sensory: ${item.sens||'‚Äî'}</div>
    </div>
    <div class="right">${new Date(item.ts).toLocaleString()}</div>`;
    el.appendChild(row);
  });
}
document.getElementById('saveLog').addEventListener('click', ()=>{
  const mood = document.getElementById('moodSel').value;
  const sens = document.getElementById('sensSel').value;
  if(!mood){ alert('Select mood'); return; }
  const logs = JSON.parse(localStorage.getItem('mostLogs') || '[]');
  logs.unshift({mood, sens, ts: Date.now()});
  localStorage.setItem('mostLogs', JSON.stringify(logs));
  renderLog();
});
renderLog();

// Messages (Flo-like)
const sampleMessages = [
  {icon:'‚è∞', title:'Transition soon', text:'A change is coming up. Try a 5‚Äëminute warning and visual timer.', time:'1:48 PM', cls:'b1'},
  {icon:'üéß', title:'Noise tips', text:'Use headphones or a quiet pass if it gets too loud today.', time:'Fri', cls:'b3'},
  {icon:'üåô', title:'Sleep check', text:'Aim for consistent pre‚Äësleep routine tonight.', time:'Mon', cls:'b2'},
];
function renderMsgs(){
  const host = document.getElementById('msgList');
  host.innerHTML='';
  sampleMessages.forEach(m => {
    const node = document.createElement('div');
    node.className='messageItem';
    node.innerHTML = `<div class="badge ${m.cls}">${m.icon}</div>
    <div><div><strong>${m.title}</strong></div><div class="muted">${m.text}</div></div>
    <div class="right">${m.time}</div>`;
    host.appendChild(node);
  });
}
renderMsgs();
</script>
</body>
</html>
